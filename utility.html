<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="mainEcon.css">
    </head>
    <body>
        <div>
            <h1 id="TitleText">Understanding Utility</h1>
        </div>
        <div id="aboveGround">
            <div id="person">
                <p id="burgerCounter">0</p>
                <div>
                    <img class="heart" id="heart" src="https://cloud.githubusercontent.com/assets/10968101/6239959/47d192a8-b6d7-11e4-9dab-2e4c9795a9dd.png">
                </div>
                <div>
                    <img class="teardrop" id="teardrop" src="https://cloud.githubusercontent.com/assets/10968101/6239960/47d3d1f8-b6d7-11e4-8dea-271b2623f6c4.png">
                </div>
                <div id="head">
                    <div class="eye" id="eye1">
                        <div class="pupil" id="pupil1"></div>
                    </div> 
                    <div class="eye" id="eye2">
                        <div class="pupil" id="pupil2"></div>
                    </div>
                    <div id="mouth"></div>
                </div>
                <div class="arm" id="l_arm"></div>
                <div id="torso"></div>
                <div class="arm" id="r_arm"></div>
                <div class="leg" id="l_leg"></div>
                <div class="leg" id="r_leg"></div>
            </div>
            <div id="conveyorBeltContainer">
                <div id="belt1"></div>
            </div>
            <div id="wheelContainer">
                <div id="wheel1"></div>
            </div>
            <div id="conveyorBeltContainer2">
                <div id="belt2"></div>
            </div>
            <div id="wheelContainer2">
                <div id="wheel2"></div>
            </div>
            <div id="burgerBound">
                <div class="burger" id="burger">
                    <div class="topping" id="bunTop"></div>
                    <div class="topping" id="topping1"></div>
                    <div class="topping" id="topping2"></div>
                    <div class="topping" id="topping3"></div>
                    <div class="topping" id="topping4"></div>
                    <div class="topping" id="bunBottom"></div>
                </div>
            </div>
        </div>
        <div id="ground">
            <h2 id="narration">Go ahead... give our hungry friend here a burger.</h2>
            <button id="burgerDeploy" onclick="burgerAnimation()">Deploy Burger</button>
        </div>
        
        <script>
            var burgerCount = 0;
            var width = 30;
            var roundness = 5;
            var marginLeft = 25;
            var eyeHeight = 10;
            var mouthMargin = 15;
            
            function burgerAnimation() {
                var narration = document.getElementById('narration');
                if (burgerCount == 0) {
                    var goodbye = document.getElementById('TitleText');
                    goodbye.parentNode.removeChild(goodbye);
                    narration.innerHTML = "Now let's see how he likes it.";
                }
                var elm = document.getElementById('burger');
                var newone = elm.cloneNode(true);
                elm.id = "toBeDeleted";
                elm.parentNode.appendChild(newone);
                elm.style.webkitAnimationPlayState = 'running';
                burgerCount++;
                var tempCount = burgerCount;
                setTimeout(function() {elm.parentNode.removeChild(elm); 
                                      document.getElementById('burgerCounter').innerHTML = tempCount;
                                        switch(tempCount) {
                                                case 1:
                                                    heartAnimation(35);
                                                    narration.innerHTML = "He loves it! Give him another one.";
                                                    break;
                                                case 2:
                                                    heartAnimation(25);
                                                    narration.innerHTML = "Not as good as the first one, but still tasty! Another!";
                                                    break;
                                                case 3:
                                                    heartAnimation(10);
                                                    narration.innerHTML = "It's the same tasty burger, just... less satisfying. See if the next one is any better.";
                                                    break;
                                                case 4:
                                                    sweatAnimation(10);
                                                    narration.innerHTML = "Oh, looks like he was full! Let's see what happens with another burger!"
                                                    break;
                                                case 5:
                                                    sweatAnimation(20);
                                                    narration.innerHTML = "Maybe this is a little unhealthy... Another!"
                                                    break;
                                                case 6:
                                                    sweatAnimation(35);
                                                    narration.innerHTML = "Look at his stomach! Let's do it again!"
                                                    break;
                                                default:
                                                    deathAnimation();
                                                    break;
                                        }}, 5000);
            }
            
            function heartAnimation(size) {
                var elm = document.getElementById('heart');
                var newone = elm.cloneNode(true);
                elm.id = "toBeDeleted";
                elm.parentNode.appendChild(newone);
                elm.style.height = size + "px";
                elm.style.webkitAnimationPlayState = 'running';
                setTimeout(function() {elm.parentNode.removeChild(elm);}, 2000);
            }
            
            function sweatAnimation(size) {
                biggerBelly();
                var elm = document.getElementById('teardrop');
                var newone = elm.cloneNode(true);
                elm.id = "toBeDeleted";
                elm.parentNode.appendChild(newone);
                elm.style.height = size + "px";
                elm.style.webkitAnimationPlayState = 'running';
                setTimeout(function() {elm.parentNode.removeChild(elm);}, 2000);
            }
            
            function deathAnimation() {
                biggerBelly();
                eyeHeight--;
                mouthMargin += 2;
                document.getElementById('eye1').style.height = eyeHeight + "px";
                document.getElementById('eye2').style.height = eyeHeight + "px";
                document.getElementById('pupil1').style.webkitAnimationPlayState = 'running';
                document.getElementById('pupil2').style.webkitAnimationPlayState = 'running';
                document.getElementById('mouth').style.marginTop = mouthMargin + "px";
            }
            
            function biggerBelly() {
                width += 4;
                marginLeft -= 2;
                roundness += 2;
                var elm = document.getElementById('torso');
                elm.style.width = width + "px"
                elm.style.marginLeft = marginLeft + "px";
                elm.style.borderRadius = roundness + "px";
            }
        </script>
    </body>
</html>
